<channelGroup version="3.10.1">
  <id>Default Group</id>
  <name>[Default Group]</name>
  <description>Channels not part of a group will appear here.</description>
  <channels>
    <channel version="3.10.1">
      <id>53fa22fb-17fc-4a2d-97b1-c23e2d9eacf2</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Supply</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;supplies.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>SupplyDelivery</variable>
                      <definition>SupplyDelivery</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>SupplyDelivery</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>text</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>status</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>in-progress</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>patient</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>suppliedItem</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>quantity</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>itemCodeableConcept</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                        <usingBuilder>true</usingBuilder>
                                        <properties class="linked-hash-map">
                                          <entry>
                                            <string>coding</string>
                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              <enabled>true</enabled>
                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                <usingBuilder>true</usingBuilder>
                                                <elements>
                                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    <usingBuilder>true</usingBuilder>
                                                    <properties class="linked-hash-map">
                                                      <entry>
                                                        <string>code</string>
                                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          <enabled>true</enabled>
                                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                            <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                                            <scriptExpression>true</scriptExpression>
                                                          </properties>
                                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      </entry>
                                                      <entry>
                                                        <string>display</string>
                                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          <enabled>true</enabled>
                                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                            <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                            <scriptExpression>true</scriptExpression>
                                                          </properties>
                                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      </entry>
                                                    </properties>
                                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                </elements>
                                              </properties>
                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          </entry>
                                          <entry>
                                            <string>text</string>
                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              <enabled>true</enabled>
                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                <scriptExpression>true</scriptExpression>
                                              </properties>
                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          </entry>
                                        </properties>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>occurrenceDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each SupplyDelivery</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>SupplyDelivery</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>SupplyDelivery[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526993482</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>d8a4374d-22da-44c3-8f2a-e5e51e5cb897</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Device</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;devices.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Device</variable>
                      <definition>Device</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Device</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>text</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>udiCarrier</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>id</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>entryType</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>barcode</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>status</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>active</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>manufactureDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>expirationDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>type</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>patient</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][ie][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Device</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Device</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Device[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526347153</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>1d0596c2-9a1e-43bb-83ad-c08ff40a0880</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Token</name>
      <description></description>
      <revision>6</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>false</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;TokenQueue&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>RAW</inboundDataType>
          <outboundDataType>RAW</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
            <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
              <splitType>JavaScript</splitType>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
            <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
              <splitType>JavaScript</splitType>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.js.JavaScriptDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <script>globalMap.put(&apos;token&apos;,connectorMessage.getRawData().toString());
</script>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Patient</variable>
                      <definition>Patient</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Patient</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>language</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>&quot;English&quot;</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>identifier</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>coding</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                    <usingBuilder>true</usingBuilder>
                                                    <elements>
                                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>code</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;DL&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>display</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;Driver&apos;s License&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    </elements>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>text</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>&quot;Driver&apos;s License&quot;</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>value</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>coding</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                    <usingBuilder>true</usingBuilder>
                                                    <elements>
                                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>code</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;SS&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>display</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;Social Security Number&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    </elements>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>text</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>&quot;Social Security Number&quot;</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>value</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>name</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>family</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>given</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column8&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>prefix</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>suffix</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>gender</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column15&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>birthDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>deceasedDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>address</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>home</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>postal</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>city</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column18&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>district</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column20&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>state</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column19&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>postalCode</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column21&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>country</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>&quot;UK&quot;</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>maritalStatus</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column12&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Patient</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Patient</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Patient[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>RAW</inboundDataType>
            <outboundDataType>RAW</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
              <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
              <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>RAW</inboundDataType>
            <outboundDataType>RAW</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
              <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.raw.RawDataTypeProperties" version="3.10.1">
              <batchProperties class="com.mirth.connect.plugins.datatypes.raw.RawBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>JavaScript Writer</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616528024531</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>fa8f572d-eb13-4b25-921d-306f7b152f56</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Immunization</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;immunization.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Immunization</variable>
                      <definition>Immunization</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Immunization</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>vaccineCode</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>patient</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>occurrenceDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Immunization</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Immunization</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Immunization[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526555243</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>a80de82c-20a4-4c66-b260-f589c28af1fb</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Encounter</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;encounters.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Encounter</variable>
                      <definition>Encounter</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Encounter</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>status</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>planned</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>class</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column8&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>code</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>display</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>period</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>start</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>end</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>reasonCode</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>coding</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>code</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column14&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>display</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column15&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>text</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column15&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>account</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>id</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>display</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>hospitalization</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>serviceProvider</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Encounter</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Encounter</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Encounter[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526435474</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>3e2c208d-e976-4d1d-a1c1-af076f0d840a</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Allergy</name>
      <description></description>
      <revision>3</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;allergies.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Allergy</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Allergy</variable>
                      <definition>AllergyIntolerance</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>AllergyIntolerance</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>type</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>allergy</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>criticality</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>low</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>code</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>patient</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>onsetPeriod</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>start</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>end</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>recordedDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>lastOccurrence</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Allergy</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Allergy</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Allergy[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616525908967</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>1c999dee-5ed2-4450-a8c4-4636984ec99d</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Patient</name>
      <description></description>
      <revision>29</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;patients.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Patient</variable>
                      <definition>Patient</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Patient</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>language</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>&quot;English&quot;</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>identifier</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>coding</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                    <usingBuilder>true</usingBuilder>
                                                    <elements>
                                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>code</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;DL&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>display</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;Driver&apos;s License&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    </elements>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>text</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>&quot;Driver&apos;s License&quot;</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>value</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>coding</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                    <usingBuilder>true</usingBuilder>
                                                    <elements>
                                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>code</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;SS&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>display</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>&quot;Social Security Number&quot;</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    </elements>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>text</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>&quot;Social Security Number&quot;</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>value</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>name</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>usual</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>family</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>given</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column8&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>prefix</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>suffix</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>gender</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column15&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>birthDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>deceasedDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>address</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>home</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>postal</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>city</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column18&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>district</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column20&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>state</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column19&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>postalCode</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column21&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>country</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>&quot;UK&quot;</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>maritalStatus</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column12&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Patient</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Patient</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Patient[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616523857159</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>c9d48269-3f99-4a94-b9ff-287d8d39fbf0</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_ImagingStudy</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;imaging_studies.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>ImagingStudy</variable>
                      <definition>ImagingStudy</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>ImagingStudy</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>status</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>registered</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>started</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>procedureCode</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>coding</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>code</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column13&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>series</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>uid</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>modality</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column8&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>bodySite</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>instance</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>id</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>false</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>uid</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>sopClass</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>code</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>msg[&apos;row&apos;][i][&apos;column11&apos;].toString()</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>display</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>msg[&apos;row&apos;][i][&apos;column12&apos;].toString()</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each ImagingStudy</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>ImagingStudy</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>ImagingStudy[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526481258</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>4dcc42be-71bf-4d53-82df-33b9f83ecee1</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Medication</name>
      <description></description>
      <revision>4</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;medications.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements>
            <com.mirth.connect.model.IteratorStep version="3.10.1">
              <name>For each msg[&apos;row&apos;]</name>
              <sequenceNumber>0</sequenceNumber>
              <enabled>true</enabled>
              <properties>
                <target>msg[&apos;row&apos;]</target>
                <indexVariable>i</indexVariable>
                <prefixSubstitutions/>
                <children>
                  <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                    <name></name>
                    <sequenceNumber>0-0</sequenceNumber>
                    <enabled>true</enabled>
                    <storeAsLocal>true</storeAsLocal>
                    <mapType>CHANNEL</mapType>
                    <variable>MedicationRequest</variable>
                    <definition>MedicationRequest</definition>
                    <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                      <usingBuilder>true</usingBuilder>
                      <properties class="linked-hash-map">
                        <entry>
                          <string>resourceType</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                              <stringValue>MedicationRequest</stringValue>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>medicationCodeableConcept</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                              <usingBuilder>true</usingBuilder>
                              <properties class="linked-hash-map">
                                <entry>
                                  <string>coding</string>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    <enabled>true</enabled>
                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                      <usingBuilder>true</usingBuilder>
                                      <elements>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                          <usingBuilder>true</usingBuilder>
                                          <properties class="linked-hash-map">
                                            <entry>
                                              <string>code</string>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                <enabled>true</enabled>
                                                <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                  <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                  <scriptExpression>true</scriptExpression>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                            </entry>
                                            <entry>
                                              <string>display</string>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                <enabled>true</enabled>
                                                <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                  <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                                  <scriptExpression>true</scriptExpression>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                            </entry>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                      </elements>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                </entry>
                                <entry>
                                  <string>text</string>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    <enabled>true</enabled>
                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                      <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                      <scriptExpression>true</scriptExpression>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                </entry>
                              </properties>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>subject</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                              <usingBuilder>true</usingBuilder>
                              <properties class="linked-hash-map">
                                <entry>
                                  <string>id</string>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    <enabled>true</enabled>
                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                      <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                      <scriptExpression>true</scriptExpression>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                </entry>
                              </properties>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>encounter</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                              <usingBuilder>true</usingBuilder>
                              <properties class="linked-hash-map">
                                <entry>
                                  <string>id</string>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    <enabled>true</enabled>
                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                      <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                      <scriptExpression>true</scriptExpression>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                </entry>
                              </properties>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>authoredOn</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                              <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                              <scriptExpression>true</scriptExpression>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>reasonCode</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                              <usingBuilder>true</usingBuilder>
                              <elements>
                                <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                  <usingBuilder>true</usingBuilder>
                                  <properties class="linked-hash-map">
                                    <entry>
                                      <string>coding</string>
                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                        <enabled>true</enabled>
                                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                          <usingBuilder>true</usingBuilder>
                                          <elements>
                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                              <usingBuilder>true</usingBuilder>
                                              <properties class="linked-hash-map">
                                                <entry>
                                                  <string>code</string>
                                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                    <enabled>true</enabled>
                                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                      <stringValue>msg[&apos;row&apos;][i][&apos;column12&apos;].toString()</stringValue>
                                                      <scriptExpression>true</scriptExpression>
                                                    </properties>
                                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                </entry>
                                                <entry>
                                                  <string>display</string>
                                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                    <enabled>true</enabled>
                                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                      <stringValue>msg[&apos;row&apos;][i][&apos;column13&apos;].toString()</stringValue>
                                                      <scriptExpression>true</scriptExpression>
                                                    </properties>
                                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                </entry>
                                              </properties>
                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                          </elements>
                                        </properties>
                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    </entry>
                                    <entry>
                                      <string>text</string>
                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                        <enabled>true</enabled>
                                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                          <stringValue>msg[&apos;row&apos;][i][&apos;column13&apos;].toString()</stringValue>
                                          <scriptExpression>true</scriptExpression>
                                        </properties>
                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    </entry>
                                  </properties>
                                </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                              </elements>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>insurance</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                              <usingBuilder>true</usingBuilder>
                              <elements>
                                <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                  <usingBuilder>true</usingBuilder>
                                  <properties class="linked-hash-map">
                                    <entry>
                                      <string>id</string>
                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                        <enabled>true</enabled>
                                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                          <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                          <scriptExpression>true</scriptExpression>
                                        </properties>
                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    </entry>
                                  </properties>
                                </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                              </elements>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                        <entry>
                          <string>dosageInstruction</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                              <usingBuilder>true</usingBuilder>
                              <elements>
                                <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                  <usingBuilder>true</usingBuilder>
                                  <properties class="linked-hash-map">
                                    <entry>
                                      <string>doseAndRate</string>
                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                        <enabled>true</enabled>
                                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                          <usingBuilder>true</usingBuilder>
                                          <elements>
                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                              <usingBuilder>true</usingBuilder>
                                              <properties class="linked-hash-map">
                                                <entry>
                                                  <string>doseQuantity</string>
                                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                    <enabled>true</enabled>
                                                    <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                                      <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                                    </properties>
                                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                </entry>
                                              </properties>
                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                          </elements>
                                        </properties>
                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                    </entry>
                                  </properties>
                                </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                              </elements>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                      </properties>
                    </model>
                    <fhirVersion>R4</fhirVersion>
                  </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                </children>
              </properties>
            </com.mirth.connect.model.IteratorStep>
            <com.mirth.connect.model.IteratorStep version="3.10.1">
              <name>For each MedicationRequest</name>
              <sequenceNumber>1</sequenceNumber>
              <enabled>true</enabled>
              <properties>
                <target>MedicationRequest</target>
                <indexVariable>i</indexVariable>
                <prefixSubstitutions/>
                <children>
                  <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                    <name></name>
                    <sequenceNumber>1-0</sequenceNumber>
                    <enabled>true</enabled>
                    <storeAsLocal>true</storeAsLocal>
                    <mapType>CHANNEL</mapType>
                    <variable>Bundle_Entry</variable>
                    <definition>Bundle_Entry</definition>
                    <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                      <usingBuilder>true</usingBuilder>
                      <properties class="linked-hash-map">
                        <entry>
                          <string>resource</string>
                          <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                            <enabled>true</enabled>
                            <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                              <stringValue>MedicationRequest[i]</stringValue>
                            </properties>
                          </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        </entry>
                      </properties>
                    </model>
                    <fhirVersion>R4</fhirVersion>
                  </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                </children>
              </properties>
            </com.mirth.connect.model.IteratorStep>
            <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
              <sequenceNumber>2</sequenceNumber>
              <enabled>true</enabled>
              <storeAsLocal>true</storeAsLocal>
              <mapType>CHANNEL</mapType>
              <variable>Bundle</variable>
              <definition>Bundle</definition>
              <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                <usingBuilder>true</usingBuilder>
                <properties class="linked-hash-map">
                  <entry>
                    <string>resourceType</string>
                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                      <enabled>true</enabled>
                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                        <stringValue>Bundle</stringValue>
                      </properties>
                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                  </entry>
                  <entry>
                    <string>type</string>
                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                      <enabled>false</enabled>
                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                        <stringValue>document</stringValue>
                        <usingEnum>true</usingEnum>
                      </properties>
                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                  </entry>
                  <entry>
                    <string>entry</string>
                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                      <enabled>true</enabled>
                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                        <stringValue>Bundle_Entry</stringValue>
                      </properties>
                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                  </entry>
                </properties>
              </model>
              <fhirVersion>R4</fhirVersion>
            </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
            <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
              <sequenceNumber>3</sequenceNumber>
              <enabled>true</enabled>
              <script>msg = Bundle;</script>
            </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
          </elements>
          <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
          <outboundTemplate encoding="base64"></outboundTemplate>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>0</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>MedicationRequest</variable>
                      <definition>MedicationRequest</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>MedicationRequest</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>medicationCodeableConcept</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>authoredOn</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>reasonCode</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>coding</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>code</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column12&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>display</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column13&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>text</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column13&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>insurance</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>id</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>dosageInstruction</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>doseAndRate</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>doseQuantity</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column10&apos;].toString()</stringValue>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each MedicationRequest</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>MedicationRequest</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>MedicationRequest[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616527084688</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>14330e99-0db2-4646-b0ca-05aec4896e7f</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Observation</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;observations.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Observation</variable>
                      <definition>Observation</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Observation</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>status</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>false</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>registered</stringValue>
                                <usingEnum>true</usingEnum>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>code</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>effectiveDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>valueQuantity</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>value</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.NumberModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>comparator</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>false</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>&lt;</stringValue>
                                        <usingEnum>true</usingEnum>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>unit</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Observation</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Observation</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Observation[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526836489</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>28d56087-24e5-4f49-9a9f-44b4563a5aaf</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Condition</name>
      <description></description>
      <revision>1</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;conditions.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Condition</variable>
                      <definition>Condition</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Condition</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>text</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>code</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>onsetDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>abatementDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>recordedDate</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Condition</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Condition</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Condition[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526139008</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>c32bb81b-5788-4448-9ff0-f39d9c5a14e7</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Procedure</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;procedures.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Procedure</variable>
                      <definition>Procedure</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Procedure</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>code</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>coding</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                        <usingBuilder>true</usingBuilder>
                                        <elements>
                                          <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>system</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>&quot;http://snomed.info/sct&quot;</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>code</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>display</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                                    <scriptExpression>true</scriptExpression>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                        </elements>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>performedDateTime</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Procedure</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Procedure</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Procedure[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526954049</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>2588de47-fe43-415b-a8e1-609a38a7d353</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Coverage</name>
      <description></description>
      <revision>1</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;payers.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Coverage</variable>
                      <definition>Coverage</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Coverage</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Date.now()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>type</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>text</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>beneficiary</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>period</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column21&apos;].toString()+&quot; months&quot;</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>payor</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>display</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Coverage</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Coverage</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Coverage[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526250364</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>6cb299e5-2291-457b-b074-0b952c408579</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_CarePlan</name>
      <description></description>
      <revision>1</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;careplans.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Allergy</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>CarePlan</variable>
                      <definition>CarePlan</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>CarePlan</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>category</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>coding</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>code</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>display</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>text</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column7&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>subject</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>encounter</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>id</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>period</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                <usingBuilder>true</usingBuilder>
                                <properties class="linked-hash-map">
                                  <entry>
                                    <string>start</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                  <entry>
                                    <string>end</string>
                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      <enabled>true</enabled>
                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                        <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                        <scriptExpression>true</scriptExpression>
                                      </properties>
                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                  </entry>
                                </properties>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>activity</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>detail</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <usingBuilder>true</usingBuilder>
                                            <properties class="linked-hash-map">
                                              <entry>
                                                <string>reasonCode</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>true</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                    <usingBuilder>true</usingBuilder>
                                                    <elements>
                                                      <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                        <usingBuilder>true</usingBuilder>
                                                        <properties class="linked-hash-map">
                                                          <entry>
                                                            <string>coding</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                                                <usingBuilder>true</usingBuilder>
                                                                <elements>
                                                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                                    <usingBuilder>true</usingBuilder>
                                                                    <properties class="linked-hash-map">
                                                                      <entry>
                                                                        <string>code</string>
                                                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                                          <enabled>true</enabled>
                                                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                            <stringValue>msg[&apos;row&apos;][i][&apos;column8&apos;].toString()</stringValue>
                                                                            <scriptExpression>true</scriptExpression>
                                                                          </properties>
                                                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                                      </entry>
                                                                      <entry>
                                                                        <string>display</string>
                                                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                                          <enabled>true</enabled>
                                                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                            <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                                                            <scriptExpression>true</scriptExpression>
                                                                          </properties>
                                                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                                      </entry>
                                                                    </properties>
                                                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                                </elements>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                          <entry>
                                                            <string>text</string>
                                                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                              <enabled>true</enabled>
                                                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                                <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                                                <scriptExpression>true</scriptExpression>
                                                              </properties>
                                                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                          </entry>
                                                        </properties>
                                                      </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                    </elements>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                              <entry>
                                                <string>status</string>
                                                <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  <enabled>false</enabled>
                                                  <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                    <stringValue>not-started</stringValue>
                                                    <usingEnum>true</usingEnum>
                                                  </properties>
                                                </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                              </entry>
                                            </properties>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each CarePlan</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>CarePlan</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>CarePlan[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616525984542</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
    <channel version="3.10.1">
      <id>d1c29346-b59b-4329-8b80-482df00af6b2</id>
      <nextMetaDataId>2</nextMetaDataId>
      <name>Somerset_Organization</name>
      <description></description>
      <revision>2</revision>
      <sourceConnector version="3.10.1">
        <metaDataId>0</metaDataId>
        <name>sourceConnector</name>
        <properties class="com.mirth.connect.connectors.js.JavaScriptReceiverProperties" version="3.10.1">
          <pluginProperties/>
          <pollConnectorProperties version="3.10.1">
            <pollingType>INTERVAL</pollingType>
            <pollOnStart>false</pollOnStart>
            <pollingFrequency>5000</pollingFrequency>
            <pollingHour>0</pollingHour>
            <pollingMinute>0</pollingMinute>
            <cronJobs/>
            <pollConnectorPropertiesAdvanced>
              <weekly>true</weekly>
              <inactiveDays>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
                <boolean>false</boolean>
              </inactiveDays>
              <dayOfMonth>1</dayOfMonth>
              <allDay>true</allDay>
              <startingHour>8</startingHour>
              <startingMinute>0</startingMinute>
              <endingHour>17</endingHour>
              <endingMinute>0</endingMinute>
            </pollConnectorPropertiesAdvanced>
          </pollConnectorProperties>
          <sourceConnectorProperties version="3.10.1">
            <responseVariable>None</responseVariable>
            <respondAfterProcessing>false</respondAfterProcessing>
            <processBatch>true</processBatch>
            <firstResponse>false</firstResponse>
            <processingThreads>1</processingThreads>
            <resourceIds class="linked-hash-map">
              <entry>
                <string>Default Resource</string>
                <string>[Default Resource]</string>
              </entry>
            </resourceIds>
            <queueBufferSize>1000</queueBufferSize>
          </sourceConnectorProperties>
          <script>importPackage(com.rabbitmq.client);

function bin2string(array){
	var result = &quot;&quot;;
	for(var i = 0; i &lt; array.length; ++i){
		result+= (String.fromCharCode(array[i]));
	}
	return result;
}

var QUEUE_NAME = &quot;organizations.csv&quot;;

var factory = new ConnectionFactory();
factory.setHost(&quot;localhost&quot;);

logger.error(&quot;STARTED&quot;);

var connection = factory.newConnection();

var channel = connection.createChannel();
channel.queueDeclare(QUEUE_NAME, false, false, false, null);

while(true){
	
	var resp = channel.basicGet(QUEUE_NAME, false);
	if(resp != null &amp;&amp; resp != undefined){
		var body = bin2string(resp.getBody());
		logger.error(body);
		return body;
}

java.lang.Thread.sleep(2000);
body = undefined;
}</script>
        </properties>
        <transformer version="3.10.1">
          <elements/>
          <inboundDataType>DELIMITED</inboundDataType>
          <outboundDataType>XML</outboundDataType>
          <inboundProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedSerializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
              <numberedRows>false</numberedRows>
              <ignoreCR>true</ignoreCR>
            </serializationProperties>
            <deserializationProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedDeserializationProperties" version="3.10.1">
              <columnDelimiter>,</columnDelimiter>
              <recordDelimiter>\n</recordDelimiter>
              <quoteToken>&quot;</quoteToken>
              <escapeWithDoubleQuote>true</escapeWithDoubleQuote>
              <quoteEscapeToken>\</quoteEscapeToken>
            </deserializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.delimited.DelimitedBatchProperties" version="3.10.1">
              <splitType>Record</splitType>
              <batchSkipRecords>1</batchSkipRecords>
              <batchMessageDelimiter></batchMessageDelimiter>
              <batchMessageDelimiterIncluded>false</batchMessageDelimiterIncluded>
              <batchGroupingColumn></batchGroupingColumn>
              <batchScript></batchScript>
            </batchProperties>
          </inboundProperties>
          <outboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
            <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
              <stripNamespaces>false</stripNamespaces>
            </serializationProperties>
            <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
              <splitType>Element_Name</splitType>
              <elementName></elementName>
              <level>1</level>
              <query></query>
              <batchScript></batchScript>
            </batchProperties>
          </outboundProperties>
        </transformer>
        <filter version="3.10.1">
          <elements/>
        </filter>
        <transportName>JavaScript Reader</transportName>
        <mode>SOURCE</mode>
        <enabled>true</enabled>
        <waitForPrevious>true</waitForPrevious>
      </sourceConnector>
      <destinationConnectors>
        <connector version="3.10.1">
          <metaDataId>1</metaDataId>
          <name>Destination 1</name>
          <properties class="com.mirth.connect.connectors.http.HttpDispatcherProperties" version="3.10.1">
            <pluginProperties/>
            <destinationConnectorProperties version="3.10.1">
              <queueEnabled>false</queueEnabled>
              <sendFirst>false</sendFirst>
              <retryIntervalMillis>10000</retryIntervalMillis>
              <regenerateTemplate>false</regenerateTemplate>
              <retryCount>0</retryCount>
              <rotate>false</rotate>
              <includeFilterTransformer>false</includeFilterTransformer>
              <threadCount>1</threadCount>
              <threadAssignmentVariable></threadAssignmentVariable>
              <validateResponse>false</validateResponse>
              <resourceIds class="linked-hash-map">
                <entry>
                  <string>Default Resource</string>
                  <string>[Default Resource]</string>
                </entry>
              </resourceIds>
              <queueBufferSize>1000</queueBufferSize>
              <reattachAttachments>true</reattachAttachments>
            </destinationConnectorProperties>
            <host>https://vx9xteo4w4.execute-api.eu-west-2.amazonaws.com/dev/Patient</host>
            <useProxyServer>false</useProxyServer>
            <proxyAddress></proxyAddress>
            <proxyPort></proxyPort>
            <method>post</method>
            <headers class="linked-hash-map">
              <entry>
                <string>Authorization</string>
                <list>
                  <string>${token}</string>
                </list>
              </entry>
              <entry>
                <string>x-api-key</string>
                <list>
                  <string>hiKuTIIvM5852qLlUIRLh4xCZRvCOQOg23GJ9UI3</string>
                </list>
              </entry>
            </headers>
            <parameters class="linked-hash-map"/>
            <useHeadersVariable>false</useHeadersVariable>
            <headersVariable></headersVariable>
            <useParametersVariable>false</useParametersVariable>
            <parametersVariable></parametersVariable>
            <responseXmlBody>false</responseXmlBody>
            <responseParseMultipart>true</responseParseMultipart>
            <responseIncludeMetadata>false</responseIncludeMetadata>
            <responseBinaryMimeTypes>application/.*(?&lt;!json|xml)$|image/.*|video/.*|audio/.*</responseBinaryMimeTypes>
            <responseBinaryMimeTypesRegex>true</responseBinaryMimeTypesRegex>
            <multipart>false</multipart>
            <useAuthentication>false</useAuthentication>
            <authenticationType>Basic</authenticationType>
            <usePreemptiveAuthentication>true</usePreemptiveAuthentication>
            <username></username>
            <password></password>
            <content>${message.encodedData}</content>
            <contentType>application/json</contentType>
            <dataTypeBinary>false</dataTypeBinary>
            <charset>UTF-8</charset>
            <socketTimeout>30000</socketTimeout>
          </properties>
          <transformer version="3.10.1">
            <elements>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each msg[&apos;row&apos;]</name>
                <sequenceNumber>0</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>msg[&apos;row&apos;]</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <sequenceNumber>0-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Organization</variable>
                      <definition>Organization</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resourceType</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>Organization</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>id</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column1&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>name</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                <stringValue>msg[&apos;row&apos;][i][&apos;column2&apos;].toString()</stringValue>
                                <scriptExpression>true</scriptExpression>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>address</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>use</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>home</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>type</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>postal</stringValue>
                                            <usingEnum>true</usingEnum>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>text</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>false</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>city</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column4&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>state</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column5&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>postalCode</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column6&apos;].toString()</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>country</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                            <stringValue>&quot;UK&quot;</stringValue>
                                            <scriptExpression>true</scriptExpression>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                          <entry>
                            <string>contact</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                <usingBuilder>true</usingBuilder>
                                <elements>
                                  <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                    <usingBuilder>true</usingBuilder>
                                    <properties class="linked-hash-map">
                                      <entry>
                                        <string>telecom</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                                            <usingBuilder>true</usingBuilder>
                                            <elements>
                                              <com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                                <usingBuilder>true</usingBuilder>
                                                <properties class="linked-hash-map">
                                                  <entry>
                                                    <string>system</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>phone</stringValue>
                                                        <usingEnum>true</usingEnum>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>value</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>true</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>msg[&apos;row&apos;][i][&apos;column9&apos;].toString()</stringValue>
                                                        <scriptExpression>true</scriptExpression>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                  <entry>
                                                    <string>use</string>
                                                    <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                      <enabled>false</enabled>
                                                      <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                                                        <stringValue>home</stringValue>
                                                        <usingEnum>true</usingEnum>
                                                      </properties>
                                                    </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                                  </entry>
                                                </properties>
                                              </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                            </elements>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                      <entry>
                                        <string>address</string>
                                        <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                          <enabled>true</enabled>
                                          <properties class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                                            <stringValue>msg[&apos;row&apos;][i][&apos;column3&apos;].toString()</stringValue>
                                          </properties>
                                        </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                                      </entry>
                                    </properties>
                                  </com.mirth.connect.jsonbuilder.shared.models.ObjectModel>
                                </elements>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.model.IteratorStep version="3.10.1">
                <name>For each Organization</name>
                <sequenceNumber>1</sequenceNumber>
                <enabled>true</enabled>
                <properties>
                  <target>Organization</target>
                  <indexVariable>i</indexVariable>
                  <prefixSubstitutions/>
                  <children>
                    <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                      <name></name>
                      <sequenceNumber>1-0</sequenceNumber>
                      <enabled>true</enabled>
                      <storeAsLocal>true</storeAsLocal>
                      <mapType>CHANNEL</mapType>
                      <variable>Bundle_Entry</variable>
                      <definition>Bundle_Entry</definition>
                      <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                        <usingBuilder>true</usingBuilder>
                        <properties class="linked-hash-map">
                          <entry>
                            <string>resource</string>
                            <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                              <enabled>true</enabled>
                              <properties class="com.mirth.connect.jsonbuilder.shared.models.OneOfModel">
                                <stringValue>Organization[i]</stringValue>
                              </properties>
                            </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                          </entry>
                        </properties>
                      </model>
                      <fhirVersion>R4</fhirVersion>
                    </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
                  </children>
                </properties>
              </com.mirth.connect.model.IteratorStep>
              <com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep version="3.10.1">
                <sequenceNumber>2</sequenceNumber>
                <enabled>true</enabled>
                <storeAsLocal>true</storeAsLocal>
                <mapType>CHANNEL</mapType>
                <variable>Bundle</variable>
                <definition>Bundle</definition>
                <model class="com.mirth.connect.jsonbuilder.shared.models.ObjectModel">
                  <usingBuilder>true</usingBuilder>
                  <properties class="linked-hash-map">
                    <entry>
                      <string>resourceType</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>Bundle</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>type</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>false</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.StringModel">
                          <stringValue>document</stringValue>
                          <usingEnum>true</usingEnum>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                    <entry>
                      <string>entry</string>
                      <com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                        <enabled>true</enabled>
                        <properties class="com.mirth.connect.jsonbuilder.shared.models.ArrayModel">
                          <stringValue>Bundle_Entry</stringValue>
                        </properties>
                      </com.mirth.connect.jsonbuilder.shared.models.ObjectProperty>
                    </entry>
                  </properties>
                </model>
                <fhirVersion>R4</fhirVersion>
              </com.mirth.connect.plugins.fhir.shared.FhirModelBuilderTransformerStep>
              <com.mirth.connect.plugins.javascriptstep.JavaScriptStep version="3.10.1">
                <sequenceNumber>3</sequenceNumber>
                <enabled>true</enabled>
                <script>msg = Bundle;</script>
              </com.mirth.connect.plugins.javascriptstep.JavaScriptStep>
            </elements>
            <inboundTemplate encoding="base64">PGRlbGltaXRlZD4KICAgIDxyb3c+CiAgICAgICAgPGNvbHVtbjE+SWQ8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+QklSVEhEQVRFPC9jb2x1bW4yPgogICAgICAgIDxjb2x1bW4zPkRFQVRIREFURTwvY29sdW1uMz4KICAgICAgICA8Y29sdW1uND5TU048L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjU+RFJJVkVSUzwvY29sdW1uNT4KICAgICAgICA8Y29sdW1uNj5QQVNTUE9SVDwvY29sdW1uNj4KICAgICAgICA8Y29sdW1uNz5QUkVGSVg8L2NvbHVtbjc+CiAgICAgICAgPGNvbHVtbjg+RklSU1Q8L2NvbHVtbjg+CiAgICAgICAgPGNvbHVtbjk+TEFTVDwvY29sdW1uOT4KICAgICAgICA8Y29sdW1uMTA+U1VGRklYPC9jb2x1bW4xMD4KICAgICAgICA8Y29sdW1uMTE+TUFJREVOPC9jb2x1bW4xMT4KICAgICAgICA8Y29sdW1uMTI+TUFSSVRBTDwvY29sdW1uMTI+CiAgICAgICAgPGNvbHVtbjEzPlJBQ0U8L2NvbHVtbjEzPgogICAgICAgIDxjb2x1bW4xND5FVEhOSUNJVFk8L2NvbHVtbjE0PgogICAgICAgIDxjb2x1bW4xNT5HRU5ERVI8L2NvbHVtbjE1PgogICAgICAgIDxjb2x1bW4xNj5CSVJUSFBMQUNFPC9jb2x1bW4xNj4KICAgICAgICA8Y29sdW1uMTc+QUREUkVTUzwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkNJVFk8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5TVEFURTwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkNPVU5UWTwvY29sdW1uMjA+CiAgICAgICAgPGNvbHVtbjIxPlpJUDwvY29sdW1uMjE+CiAgICAgICAgPGNvbHVtbjIyPkxBVDwvY29sdW1uMjI+CiAgICAgICAgPGNvbHVtbjIzPkxPTjwvY29sdW1uMjM+CiAgICAgICAgPGNvbHVtbjI0PkhFQUxUSENBUkVfRVhQRU5TRVM8L2NvbHVtbjI0PgogICAgICAgIDxjb2x1bW4yNT5IRUFMVEhDQVJFX0NPVkVSQUdFPC9jb2x1bW4yNT4KICAgIDwvcm93PgogICAgPHJvdz4KICAgICAgICA8Y29sdW1uMT41OTgwNTU4NS02MWU1LTU2YjctZjY1Yi05M2Y3MDk0ZDdiYjI8L2NvbHVtbjE+CiAgICAgICAgPGNvbHVtbjI+MjAwNy0wMS0zMDwvY29sdW1uMj4KICAgICAgICA8Y29sdW1uMy8+CiAgICAgICAgPGNvbHVtbjQ+OTk5LTY0LTMzNDM8L2NvbHVtbjQ+CiAgICAgICAgPGNvbHVtbjUvPgogICAgICAgIDxjb2x1bW42Lz4KICAgICAgICA8Y29sdW1uNy8+CiAgICAgICAgPGNvbHVtbjg+RG91Z2xhczMxPC9jb2x1bW44PgogICAgICAgIDxjb2x1bW45Pk9uZHJpY2thMTk3PC9jb2x1bW45PgogICAgICAgIDxjb2x1bW4xMC8+CiAgICAgICAgPGNvbHVtbjExLz4KICAgICAgICA8Y29sdW1uMTIvPgogICAgICAgIDxjb2x1bW4xMz53aGl0ZTwvY29sdW1uMTM+CiAgICAgICAgPGNvbHVtbjE0Pm5vbmhpc3BhbmljPC9jb2x1bW4xND4KICAgICAgICA8Y29sdW1uMTU+TTwvY29sdW1uMTU+CiAgICAgICAgPGNvbHVtbjE2PkJyaXN0b2wgIFNvbWVyc2V0ICBHQjwvY29sdW1uMTY+CiAgICAgICAgPGNvbHVtbjE3PjEwOTQgVHJldXRlbCBEcml2ZTwvY29sdW1uMTc+CiAgICAgICAgPGNvbHVtbjE4PkJyaXN0b2w8L2NvbHVtbjE4PgogICAgICAgIDxjb2x1bW4xOT5Tb21lcnNldDwvY29sdW1uMTk+CiAgICAgICAgPGNvbHVtbjIwPkJyaXN0b2w8L2NvbHVtbjIwPgogICAgICAgIDxjb2x1bW4yMT5CUzM5PC9jb2x1bW4yMT4KICAgICAgICA8Y29sdW1uMjI+NTEuNDE5OTY1ODgyNjEyMTU8L2NvbHVtbjIyPgogICAgICAgIDxjb2x1bW4yMz4tMi42MTkzODU4MzI4NDAxMDAzPC9jb2x1bW4yMz4KICAgICAgICA8Y29sdW1uMjQ+MC4wPC9jb2x1bW4yND4KICAgICAgICA8Y29sdW1uMjU+MzI5Ni4zNjwvY29sdW1uMjU+CiAgICA8L3Jvdz4KPC9kZWxpbWl0ZWQ+Cg==</inboundTemplate>
            <outboundTemplate encoding="base64"></outboundTemplate>
            <inboundDataType>XML</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.xml.XMLDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.xml.XMLSerializationProperties" version="3.10.1">
                <stripNamespaces>false</stripNamespaces>
              </serializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.xml.XMLBatchProperties" version="3.10.1">
                <splitType>Element_Name</splitType>
                <elementName></elementName>
                <level>1</level>
                <query></query>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </transformer>
          <responseTransformer version="3.10.1">
            <elements/>
            <inboundDataType>FHIR</inboundDataType>
            <outboundDataType>FHIR</outboundDataType>
            <inboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </inboundProperties>
            <outboundProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDataTypeProperties" version="3.10.1">
              <serializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirSerializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
                <fhirVersion>R4</fhirVersion>
              </serializationProperties>
              <deserializationProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirDeserializationProperties" version="3.10.1">
                <serializationType>JSON</serializationType>
              </deserializationProperties>
              <batchProperties class="com.mirth.connect.plugins.datatypes.fhir.shared.FhirBatchProperties" version="3.10.1">
                <splitType>JavaScript</splitType>
                <batchScript></batchScript>
              </batchProperties>
            </outboundProperties>
          </responseTransformer>
          <filter version="3.10.1">
            <elements/>
          </filter>
          <transportName>HTTP Sender</transportName>
          <mode>DESTINATION</mode>
          <enabled>true</enabled>
          <waitForPrevious>true</waitForPrevious>
        </connector>
      </destinationConnectors>
      <preprocessingScript>// Modify the message variable below to pre process data
return message;</preprocessingScript>
      <postprocessingScript>// This script executes once after a message has been processed
// Responses returned from here will be stored as &quot;Postprocessor&quot; in the response map
return;</postprocessingScript>
      <deployScript>// This script executes once when the channel is deployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</deployScript>
      <undeployScript>// This script executes once when the channel is undeployed
// You only have access to the globalMap and globalChannelMap here to persist data
return;</undeployScript>
      <properties version="3.10.1">
        <clearGlobalChannelMap>true</clearGlobalChannelMap>
        <messageStorageMode>DEVELOPMENT</messageStorageMode>
        <encryptData>false</encryptData>
        <removeContentOnCompletion>false</removeContentOnCompletion>
        <removeOnlyFilteredOnCompletion>false</removeOnlyFilteredOnCompletion>
        <removeAttachmentsOnCompletion>false</removeAttachmentsOnCompletion>
        <initialState>STARTED</initialState>
        <storeAttachments>true</storeAttachments>
        <metaDataColumns>
          <metaDataColumn>
            <name>SOURCE</name>
            <type>STRING</type>
            <mappingName>mirth_source</mappingName>
          </metaDataColumn>
          <metaDataColumn>
            <name>TYPE</name>
            <type>STRING</type>
            <mappingName>mirth_type</mappingName>
          </metaDataColumn>
        </metaDataColumns>
        <attachmentProperties version="3.10.1">
          <type>None</type>
          <properties/>
        </attachmentProperties>
        <resourceIds class="linked-hash-map">
          <entry>
            <string>Default Resource</string>
            <string>[Default Resource]</string>
          </entry>
        </resourceIds>
      </properties>
      <exportData>
        <metadata>
          <enabled>true</enabled>
          <lastModified>
            <time>1616526891668</time>
            <timezone>Europe/London</timezone>
          </lastModified>
          <pruningSettings>
            <archiveEnabled>true</archiveEnabled>
          </pruningSettings>
        </metadata>
      </exportData>
    </channel>
  </channels>
</channelGroup>